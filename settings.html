<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الإعدادات والتخصيص - مستشفى الوحدة درنة</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="dashboard.html">
                <i class="fas fa-hospital-symbol me-2"></i>
                مستشفى الوحدة درنة
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html">
                            <i class="fas fa-home me-1"></i>الرئيسية
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="add-patient.html">
                            <i class="fas fa-user-plus me-1"></i>إضافة مريض
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="statistics.html">
                            <i class="fas fa-chart-bar me-1"></i>الإحصائيات
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="users.html">
                            <i class="fas fa-users me-1"></i>المستخدمين
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="settings.html">
                            <i class="fas fa-cogs me-1"></i>الإعدادات
                        </a>
                    </li>
                </ul>
                
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user-circle me-1"></i>
                            <span id="currentUser">أحمد محمود</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="profile.html">
                                <i class="fas fa-user me-2"></i>الملف الشخصي
                            </a></li>
                            <li><a class="dropdown-item" href="trash.html">
                                <i class="fas fa-trash me-2"></i>سلة المحذوفات
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="logout()">
                                <i class="fas fa-sign-out-alt me-2"></i>تسجيل الخروج
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid mt-5 pt-4">
        <div class="row">
            <!-- Settings Sidebar -->
            <div class="col-md-3 col-lg-2">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h6 class="mb-0">فئات الإعدادات</h6>
                    </div>
                    <div class="list-group list-group-flush">
                        <a href="#general" class="list-group-item list-group-item-action active" data-bs-toggle="tab">
                            <i class="fas fa-cog me-2"></i>الإعدادات العامة
                        </a>
                        <a href="#departments" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                            <i class="fas fa-building me-2"></i>إدارة الأقسام
                        </a>
                        <a href="#system" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                            <i class="fas fa-server me-2"></i>إعدادات النظام
                        </a>
                        <a href="#network" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                            <i class="fas fa-network-wired me-2"></i>مراقب الشبكات
                        </a>
                        <a href="#backup" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                            <i class="fas fa-database me-2"></i>النسخ الاحتياطي
                        </a>
                        <a href="#security" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                            <i class="fas fa-shield-alt me-2"></i>الأمان والحماية
                        </a>
                        <a href="#customization" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                            <i class="fas fa-palette me-2"></i>التخصيص والواجهة
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Settings Content -->
            <div class="col-md-9 col-lg-10">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h1 class="h3 mb-0">الإعدادات والتخصيص</h1>
                    <div class="btn-group">
                        <button class="btn btn-outline-primary" onclick="saveAllSettings()">
                            <i class="fas fa-save me-2"></i>حفظ جميع الإعدادات
                        </button>
                        <button class="btn btn-outline-secondary" onclick="resetSettings()">
                            <i class="fas fa-undo me-2"></i>إعادة تعيين
                        </button>
                    </div>
                </div>

                <div class="tab-content">
                    <!-- الإعدادات العامة -->
                    <div class="tab-pane fade show active" id="general">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">معلومات المستشفى</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">اسم المستشفى</label>
                                            <input type="text" class="form-control" value="مستشفى الوحدة درنة" id="hospitalName">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">العنوان</label>
                                            <textarea class="form-control" rows="2" id="hospitalAddress">درنة - ليبيا</textarea>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">رقم الهاتف</label>
                                            <input type="tel" class="form-control" value="0619876543" id="hospitalPhone">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">البريد الإلكتروني</label>
                                            <input type="email" class="form-control" value="info@hospital.ly" id="hospitalEmail">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-header">
                                        <h5 class="mb-0">إعدادات التطبيق</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">مهلة انتهاء الجلسة (دقيقة)</label>
                                            <input type="number" class="form-control" value="30" min="5" max="180" id="sessionTimeout">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">عدد المرضى في الصفحة</label>
                                            <select class="form-select" id="patientsPerPage">
                                                <option value="10">10</option>
                                                <option value="25" selected>25</option>
                                                <option value="50">50</option>
                                                <option value="100">100</option>
                                            </select>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="enableNotifications" checked>
                                            <label class="form-check-label" for="enableNotifications">
                                                تفعيل الإشعارات
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="autoSave" checked>
                                            <label class="form-check-label" for="autoSave">
                                                الحفظ التلقائي
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">إعدادات الطباعة</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">حجم الروشتة</label>
                                            <select class="form-select" id="prescriptionSize">
                                                <option value="A6" selected>A6 (صغير)</option>
                                                <option value="A5">A5 (متوسط)</option>
                                                <option value="A4">A4 (كبير)</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">خط الطباعة</label>
                                            <select class="form-select" id="printFont">
                                                <option value="Arial" selected>Arial</option>
                                                <option value="Times New Roman">Times New Roman</option>
                                                <option value="Helvetica">Helvetica</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">حجم الخط</label>
                                            <input type="range" class="form-range" min="10" max="16" value="12" id="fontSize">
                                            <div class="d-flex justify-content-between">
                                                <small>صغير</small>
                                                <small>كبير</small>
                                            </div>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="includeLogo" checked>
                                            <label class="form-check-label" for="includeLogo">
                                                تضمين شعار المستشفى
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-header">
                                        <h5 class="mb-0">إعدادات اللغة والمنطقة</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">اللغة الافتراضية</label>
                                            <select class="form-select" id="defaultLanguage">
                                                <option value="ar" selected>العربية</option>
                                                <option value="en">English</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">تنسيق التاريخ</label>
                                            <select class="form-select" id="dateFormat">
                                                <option value="dd/mm/yyyy" selected>يوم/شهر/سنة</option>
                                                <option value="mm/dd/yyyy">شهر/يوم/سنة</option>
                                                <option value="yyyy-mm-dd">سنة-شهر-يوم</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">المنطقة الزمنية</label>
                                            <select class="form-select" id="timezone">
                                                <option value="Africa/Tripoli" selected>طرابلس (UTC+2)</option>
                                                <option value="UTC">UTC</option>
                                                <option value="Europe/London">لندن</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- إدارة الأقسام -->
                    <div class="tab-pane fade" id="departments">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">إدارة الأقسام</h5>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addDepartmentModal">
                                    <i class="fas fa-plus me-2"></i>إضافة قسم جديد
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped" id="departmentsTable">
                                        <thead>
                                            <tr>
                                                <th>اسم القسم</th>
                                                <th>الرمز</th>
                                                <th>المسؤول</th>
                                                <th>عدد الأسرة</th>
                                                <th>الحالة</th>
                                                <th>الإجراءات</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>الطوارئ</td>
                                                <td>EMER</td>
                                                <td>د. أحمد سالم</td>
                                                <td>15</td>
                                                <td><span class="badge bg-success">نشط</span></td>
                                                <td>
                                                    <div class="btn-group btn-group-sm">
                                                        <button class="btn btn-outline-primary">
                                                            <i class="fas fa-edit"></i>
                                                        </button>
                                                        <button class="btn btn-outline-danger">
                                                            <i class="fas fa-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>الأمراض الباطنية</td>
                                                <td>INT</td>
                                                <td>د. محمد الطاهر</td>
                                                <td>20</td>
                                                <td><span class="badge bg-success">نشط</span></td>
                                                <td>
                                                    <div class="btn-group btn-group-sm">
                                                        <button class="btn btn-outline-primary">
                                                            <i class="fas fa-edit"></i>
                                                        </button>
                                                        <button class="btn btn-outline-danger">
                                                            <i class="fas fa-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>الجراحة العامة</td>
                                                <td>SURG</td>
                                                <td>د. فاطمة علي</td>
                                                <td>12</td>
                                                <td><span class="badge bg-success">نشط</span></td>
                                                <td>
                                                    <div class="btn-group btn-group-sm">
                                                        <button class="btn btn-outline-primary">
                                                            <i class="fas fa-edit"></i>
                                                        </button>
                                                        <button class="btn btn-outline-danger">
                                                            <i class="fas fa-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- إعدادات النظام -->
                    <div class="tab-pane fade" id="system">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">حالة النظام</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <span>خادم قاعدة البيانات</span>
                                            <span class="badge bg-success">متصل</span>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <span>خادم الويب</span>
                                            <span class="badge bg-success">يعمل</span>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <span>مساحة القرص الصلب</span>
                                            <span class="badge bg-warning">75%</span>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <span>الذاكرة المستخدمة</span>
                                            <span class="badge bg-info">45%</span>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span>آخر نسخة احتياطية</span>
                                            <span class="badge bg-success">2024-01-15</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-header">
                                        <h5 class="mb-0">معلومات النسخة</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>إصدار النظام:</span>
                                            <strong>v1.0.0</strong>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>تاريخ الإصدار:</span>
                                            <strong>2024-01-01</strong>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>آخر تحديث:</span>
                                            <strong>2024-01-15</strong>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <span>الرخصة:</span>
                                            <strong>تجارية</strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">إعدادات الأداء</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">حد الاتصالات المتزامنة</label>
                                            <input type="number" class="form-control" value="100" min="10" max="1000">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">مهلة انتظار الاستعلام (ثانية)</label>
                                            <input type="number" class="form-control" value="30" min="5" max="120">
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="enableCaching" checked>
                                            <label class="form-check-label" for="enableCaching">
                                                تفعيل التخزين المؤقت
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="enableCompression" checked>
                                            <label class="form-check-label" for="enableCompression">
                                                تفعيل ضغط البيانات
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-header">
                                        <h5 class="mb-0">أدوات النظام</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-outline-primary" onclick="runSystemDiagnostics()">
                                                <i class="fas fa-stethoscope me-2"></i>فحص النظام
                                            </button>
                                            <button class="btn btn-outline-warning" onclick="clearCache()">
                                                <i class="fas fa-broom me-2"></i>مسح التخزين المؤقت
                                            </button>
                                            <button class="btn btn-outline-info" onclick="generateReport()">
                                                <i class="fas fa-file-alt me-2"></i>تقرير النظام
                                            </button>
                                            <button class="btn btn-outline-success" onclick="exportSettings()">
                                                <i class="fas fa-download me-2"></i>تصدير الإعدادات
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- مراقب الشبكات -->
                    <div class="tab-pane fade" id="network">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0">الأجهزة المتصلة</h5>
                                        <button class="btn btn-primary btn-sm" onclick="scanNetwork()">
                                            <i class="fas fa-search me-2"></i>فحص الشبكة
                                        </button>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped" id="networkedDevices">
                                                <thead>
                                                    <tr>
                                                        <th>الجهاز</th>
                                                        <th>عنوان IP</th>
                                                        <th>النوع</th>
                                                        <th>الحالة</th>
                                                        <th>آخر اتصال</th>
                                                        <th>إجراءات</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>جهاز الاستقبال الرئيسي</td>
                                                        <td>192.168.1.10</td>
                                                        <td>كمبيوتر</td>
                                                        <td><span class="badge bg-success">متصل</span></td>
                                                        <td>منذ 2 دقائق</td>
                                                        <td>
                                                            <button class="btn btn-outline-primary btn-sm" onclick="connectDevice('192.168.1.10')">
                                                                <i class="fas fa-link"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>طابعة الروشتات</td>
                                                        <td>192.168.1.15</td>
                                                        <td>طابعة</td>
                                                        <td><span class="badge bg-success">متصل</span></td>
                                                        <td>منذ 5 دقائق</td>
                                                        <td>
                                                            <button class="btn btn-outline-primary btn-sm" onclick="connectDevice('192.168.1.15')">
                                                                <i class="fas fa-link"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>جهاز المختبر</td>
                                                        <td>192.168.1.20</td>
                                                        <td>كمبيوتر</td>
                                                        <td><span class="badge bg-warning">غير متصل</span></td>
                                                        <td>منذ 30 دقيقة</td>
                                                        <td>
                                                            <button class="btn btn-outline-warning btn-sm" onclick="connectDevice('192.168.1.20')">
                                                                <i class="fas fa-unlink"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">إحصائيات الشبكة</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between">
                                                <span>الأجهزة النشطة:</span>
                                                <strong>5</strong>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between">
                                                <span>الأجهزة غير المتصلة:</span>
                                                <strong>2</strong>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between">
                                                <span>متوسط زمن الاستجابة:</span>
                                                <strong>25ms</strong>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between">
                                                <span>استهلاك البيانات اليوم:</span>
                                                <strong>2.3GB</strong>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-header">
                                        <h5 class="mb-0">اتصالات سريعة</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-outline-success btn-sm" onclick="connectAllDevices()">
                                                <i class="fas fa-plug me-2"></i>ربط جميع الأجهزة
                                            </button>
                                            <button class="btn btn-outline-primary btn-sm" onclick="refreshNetworkStatus()">
                                                <i class="fas fa-sync me-2"></i>تحديث الحالة
                                            </button>
                                            <button class="btn btn-outline-warning btn-sm" onclick="pingAllDevices()">
                                                <i class="fas fa-wifi me-2"></i>اختبار الاتصال
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- النسخ الاحتياطي -->
                    <div class="tab-pane fade" id="backup">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">إنشاء نسخة احتياطية</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">اسم النسخة الاحتياطية</label>
                                            <input type="text" class="form-control" id="backupName" placeholder="backup_2024-01-15">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">نوع النسخة الاحتياطية</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="backupType" value="full" id="fullBackup" checked>
                                                <label class="form-check-label" for="fullBackup">
                                                    نسخة كاملة (جميع البيانات)
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="backupType" value="incremental" id="incrementalBackup">
                                                <label class="form-check-label" for="incrementalBackup">
                                                    نسخة تدريجية (التغييرات الأخيرة فقط)
                                                </label>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">البيانات المراد نسخها</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="patients" checked>
                                                <label class="form-check-label">بيانات المرضى</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="users" checked>
                                                <label class="form-check-label">بيانات المستخدمين</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="settings" checked>
                                                <label class="form-check-label">الإعدادات</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="reports">
                                                <label class="form-check-label">التقارير</label>
                                            </div>
                                        </div>
                                        <button class="btn btn-primary w-100" onclick="createBackup()">
                                            <i class="fas fa-save me-2"></i>إنشاء نسخة احتياطية
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">النسخ الاحتياطية المتوفرة</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="backup-item border rounded p-3 mb-3">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="mb-1">backup_2024-01-15_full</h6>
                                                    <small class="text-muted">نسخة كاملة - 15 يناير 2024 - 45.2MB</small>
                                                </div>
                                                <div class="btn-group btn-group-sm">
                                                    <button class="btn btn-outline-success" onclick="restoreBackup('backup_2024-01-15_full')">
                                                        <i class="fas fa-undo"></i>
                                                    </button>
                                                    <button class="btn btn-outline-primary" onclick="downloadBackup('backup_2024-01-15_full')">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <button class="btn btn-outline-danger" onclick="deleteBackup('backup_2024-01-15_full')">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="backup-item border rounded p-3 mb-3">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="mb-1">backup_2024-01-10_full</h6>
                                                    <small class="text-muted">نسخة كاملة - 10 يناير 2024 - 43.8MB</small>
                                                </div>
                                                <div class="btn-group btn-group-sm">
                                                    <button class="btn btn-outline-success" onclick="restoreBackup('backup_2024-01-10_full')">
                                                        <i class="fas fa-undo"></i>
                                                    </button>
                                                    <button class="btn btn-outline-primary" onclick="downloadBackup('backup_2024-01-10_full')">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <button class="btn btn-outline-danger" onclick="deleteBackup('backup_2024-01-10_full')">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="backup-item border rounded p-3">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="mb-1">backup_2024-01-05_incremental</h6>
                                                    <small class="text-muted">نسخة تدريجية - 5 يناير 2024 - 5.2MB</small>
                                                </div>
                                                <div class="btn-group btn-group-sm">
                                                    <button class="btn btn-outline-success" onclick="restoreBackup('backup_2024-01-05_incremental')">
                                                        <i class="fas fa-undo"></i>
                                                    </button>
                                                    <button class="btn btn-outline-primary" onclick="downloadBackup('backup_2024-01-05_incremental')">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <button class="btn btn-outline-danger" onclick="deleteBackup('backup_2024-01-05_incremental')">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-header">
                                        <h5 class="mb-0">النسخ الاحتياطي التلقائي</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="enableAutoBackup" checked>
                                            <label class="form-check-label" for="enableAutoBackup">
                                                تفعيل النسخ الاحتياطي التلقائي
                                            </label>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">تكرار النسخ التلقائي</label>
                                            <select class="form-select" id="autoBackupFrequency">
                                                <option value="daily" selected>يومي</option>
                                                <option value="weekly">أسبوعي</option>
                                                <option value="monthly">شهري</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">وقت النسخ التلقائي</label>
                                            <input type="time" class="form-control" value="02:00" id="autoBackupTime">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- الأمان والحماية -->
                    <div class="tab-pane fade" id="security">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">إعدادات كلمة المرور</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">الحد الأدنى لطول كلمة المرور</label>
                                            <input type="number" class="form-control" value="8" min="6" max="20" id="minPasswordLength">
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="requireUppercase" checked>
                                            <label class="form-check-label" for="requireUppercase">
                                                يتطلب أحرف كبيرة
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="requireNumbers" checked>
                                            <label class="form-check-label" for="requireNumbers">
                                                يتطلب أرقام
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="requireSpecialChars">
                                            <label class="form-check-label" for="requireSpecialChars">
                                                يتطلب رموز خاصة
                                            </label>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">انتهاء صلاحية كلمة المرور (أيام)</label>
                                            <input type="number" class="form-control" value="90" min="30" max="365" id="passwordExpiry">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-header">
                                        <h5 class="mb-0">إعدادات تسجيل الدخول</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">الحد الأقصى لمحاولات تسجيل الدخول</label>
                                            <input type="number" class="form-control" value="5" min="3" max="10" id="maxLoginAttempts">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">مدة حظر الحساب (دقائق)</label>
                                            <input type="number" class="form-control" value="15" min="5" max="60" id="accountLockoutDuration">
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="enableTwoFactor">
                                            <label class="form-check-label" for="enableTwoFactor">
                                                تفعيل المصادقة الثنائية
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="logFailedAttempts" checked>
                                            <label class="form-check-label" for="logFailedAttempts">
                                                تسجيل محاولات الدخول الفاشلة
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">سجل الأمان</h5>
                                    </div>
                                    <div class="card-body" style="max-height: 400px; overflow-y: auto;">
                                        <div class="security-log-item border-bottom pb-2 mb-3">
                                            <div class="d-flex justify-content-between">
                                                <small class="text-success">تسجيل دخول ناجح</small>
                                                <small class="text-muted">2024-01-15 09:30</small>
                                            </div>
                                            <div>
                                                <strong>amod</strong> - IP: 192.168.1.5
                                            </div>
                                        </div>
                                        
                                        <div class="security-log-item border-bottom pb-2 mb-3">
                                            <div class="d-flex justify-content-between">
                                                <small class="text-danger">محاولة دخول فاشلة</small>
                                                <small class="text-muted">2024-01-15 08:45</small>
                                            </div>
                                            <div>
                                                <strong>unknown_user</strong> - IP: 192.168.1.100
                                            </div>
                                        </div>
                                        
                                        <div class="security-log-item border-bottom pb-2 mb-3">
                                            <div class="d-flex justify-content-between">
                                                <small class="text-warning">تغيير كلمة مرور</small>
                                                <small class="text-muted">2024-01-14 16:20</small>
                                            </div>
                                            <div>
                                                <strong>dr.salem</strong> - IP: 192.168.1.10
                                            </div>
                                        </div>
                                        
                                        <div class="security-log-item">
                                            <div class="d-flex justify-content-between">
                                                <small class="text-info">إضافة مستخدم جديد</small>
                                                <small class="text-muted">2024-01-14 14:15</small>
                                            </div>
                                            <div>
                                                <strong>amod</strong> أضاف <strong>sarah.ahmed</strong>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-header">
                                        <h5 class="mb-0">أدوات الأمان</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-outline-primary" onclick="exportSecurityLog()">
                                                <i class="fas fa-download me-2"></i>تصدير سجل الأمان
                                            </button>
                                            <button class="btn btn-outline-warning" onclick="clearSecurityLog()">
                                                <i class="fas fa-trash me-2"></i>مسح سجل الأمان
                                            </button>
                                            <button class="btn btn-outline-danger" onclick="forceLogoutAll()">
                                                <i class="fas fa-sign-out-alt me-2"></i>إخراج جميع المستخدمين
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- التخصيص والواجهة -->
                    <div class="tab-pane fade" id="customization">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">ألوان الواجهة</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">اللون الأساسي</label>
                                            <input type="color" class="form-control form-control-color" value="#0d6efd" id="primaryColor">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">لون النجاح</label>
                                            <input type="color" class="form-control form-control-color" value="#198754" id="successColor">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">لون التحذير</label>
                                            <input type="color" class="form-control form-control-color" value="#ffc107" id="warningColor">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">لون الخطر</label>
                                            <input type="color" class="form-control form-control-color" value="#dc3545" id="dangerColor">
                                        </div>
                                        <button class="btn btn-primary" onclick="applyColors()">
                                            <i class="fas fa-palette me-2"></i>تطبيق الألوان
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-header">
                                        <h5 class="mb-0">إعدادات العرض</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">حجم الخط</label>
                                            <select class="form-select" id="fontSize">
                                                <option value="small">صغير</option>
                                                <option value="medium" selected>متوسط</option>
                                                <option value="large">كبير</option>
                                            </select>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="enableAnimations" checked>
                                            <label class="form-check-label" for="enableAnimations">
                                                تفعيل الرسوم المتحركة
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="enableSounds">
                                            <label class="form-check-label" for="enableSounds">
                                                تفعيل الأصوات
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="compactMode">
                                            <label class="form-check-label" for="compactMode">
                                                الوضع المدمج
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">معاينة الواجهة</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="preview-section">
                                            <h6>نموذج للبطاقات</h6>
                                            <div class="card border mb-3">
                                                <div class="card-header bg-primary text-white">
                                                    <i class="fas fa-user me-2"></i>
                                                    مريض جديد
                                                </div>
                                                <div class="card-body">
                                                    <p>هذا مثال لبطاقة في النظام</p>
                                                    <div class="btn-group">
                                                        <button class="btn btn-primary btn-sm">حفظ</button>
                                                        <button class="btn btn-outline-secondary btn-sm">إلغاء</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="preview-section">
                                            <h6>نموذج للأزرار</h6>
                                            <div class="d-flex gap-2 mb-3">
                                                <button class="btn btn-primary btn-sm">أساسي</button>
                                                <button class="btn btn-success btn-sm">نجح</button>
                                                <button class="btn btn-warning btn-sm">تحذير</button>
                                                <button class="btn btn-danger btn-sm">خطر</button>
                                            </div>
                                        </div>
                                        
                                        <div class="preview-section">
                                            <h6>نموذج للتنبيهات</h6>
                                            <div class="alert alert-success alert-sm mb-2">
                                                <i class="fas fa-check-circle me-2"></i>
                                                تم الحفظ بنجاح
                                            </div>
                                            <div class="alert alert-warning alert-sm">
                                                <i class="fas fa-exclamation-triangle me-2"></i>
                                                يرجى المراجعة
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-header">
                                        <h5 class="mb-0">القوالب المحفوظة</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-outline-primary" onclick="loadTheme('default')">
                                                <i class="fas fa-palette me-2"></i>القالب الافتراضي
                                            </button>
                                            <button class="btn btn-outline-success" onclick="loadTheme('medical')">
                                                <i class="fas fa-plus-square me-2"></i>القالب الطبي
                                            </button>
                                            <button class="btn btn-outline-info" onclick="loadTheme('modern')">
                                                <i class="fas fa-star me-2"></i>القالب العصري
                                            </button>
                                            <button class="btn btn-outline-secondary" onclick="saveCurrentTheme()">
                                                <i class="fas fa-save me-2"></i>حفظ القالب الحالي
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Department Modal -->
    <div class="modal fade" id="addDepartmentModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">إضافة قسم جديد</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addDepartmentForm">
                        <div class="mb-3">
                            <label for="deptName" class="form-label">اسم القسم</label>
                            <input type="text" class="form-control" id="deptName" required>
                        </div>
                        <div class="mb-3">
                            <label for="deptCode" class="form-label">رمز القسم</label>
                            <input type="text" class="form-control" id="deptCode" maxlength="5" required>
                        </div>
                        <div class="mb-3">
                            <label for="deptHead" class="form-label">مسؤول القسم</label>
                            <select class="form-select" id="deptHead" required>
                                <option value="">اختر المسؤول</option>
                                <option value="dr.salem">د. محمد سالم</option>
                                <option value="dr.ahmed">د. أحمد الطاهر</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="bedCount" class="form-label">عدد الأسرة</label>
                            <input type="number" class="form-control" id="bedCount" min="1" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-primary" onclick="saveDepartment()">
                        <i class="fas fa-save me-2"></i>حفظ القسم
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/settings.js"></script>
</body>
</html>